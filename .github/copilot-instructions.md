## AgenticFleet fast-start for AI copilots

- Big picture: Microsoft Agent Framework backend in `src/agentic_fleet/` orchestrates Magentic workflows and dynamic spawns (`src/agentic_fleet/workflows/dynamic_orchestration/`); React + Vite frontend in `src/frontend/src` renders streaming Responses from FastAPI.
- Workflow spine: `workflow/magentic_workflow.py` builds fleets from YAML, while `workflow/events.py` + `api/responses/service.py` convert Magentic events into OpenAI Responses/SSE payloads consumed by the frontend store.
- Agent roster: planner, executor, coder, verifier, generator factories live under `agents/`; prompts & tool wiring stay declarative in `agents/<role>/config.yaml` and `config/workflows.yaml`. Never hard-code model IDs or instructions in Python.
- Entry points: `uv run agentic-fleet` (full stack), `uv run fleet` (CLI), `make backend` / `make frontend-dev` for single services. Every Python command must be prefixed with `uv run` to respect the managed environment.
- Critical dev loop:
  - Install deps: `make install` (backend) + `make frontend-install` (npm in `src/frontend/src`).
  - Validate configuration after YAML edits: `make test-config` (loads `WorkflowFactory`).
  - Quality gates: `make check` (ruff, black, mypy) and focused backend tests via `uv run pytest tests/test_*.py -k <pattern>`; streaming changes require `tests/test_api_responses_streaming.py`.
  - Frontend quality: run `npm run test` and `npm run lint` from `src/frontend/src`.
- Change map:
  - Orchestration or limits → `config/workflows.yaml` (mirrored in packaged `src/agentic_fleet/workflows.yaml`).
  - Agent behaviour or tools → `agents/<role>/agent.py` + `agents/<role>/tools/`; ensure exports in `agents/__init__.py`.
  - Response/SSE schema → update `workflow/events.py`, `api/responses/service.py`, and align frontend parsers under `src/frontend/src/lib/parsers` plus `stores/chatStore.ts`.
  - UI components → `src/frontend/src/components/` (chat) or `components/ui/` (shared atoms); sync types with `src/frontend/src/types` and backend Pydantic models in `src/agentic_fleet/models`.
- Conventions worth memorising:
  - Tool adapters must return Pydantic payloads from `src/agentic_fleet/core/code_types.py`; unit tests assert these contracts.
  - Human-in-the-loop approvals run through `api/approvals/` + `core/approval.py`; honour `human_in_the_loop` flags in YAML when adding sensitive actions.
  - Persistent state/checkpoints reside in `var/checkpoints/`; wire via `FleetBuilder.with_checkpointing()`.
  - Tests mock `OpenAIResponsesClient`—never rely on real network calls inside `tests/`.
- Observability & integrations: `.env` provides `OPENAI_API_KEY` plus optional `ENABLE_OTEL`, `MEM0_HISTORY_DB_PATH`, `REDIS_URL`. Guard optional providers in `integrations/` and document new env vars in `docs/configuration-guide.md`.
- Documentation chain: keep root `AGENTS.md`, `src/agentic_fleet/AGENTS.md`, `src/frontend/AGENTS.md`, and `tests/AGENTS.md` consistent; run `make validate-agents` whenever these guides change.
